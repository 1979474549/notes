# RESTful API 设计规范

## 协议

与用户的通信应该使用
[https](https与nodejs实现)

## 域名

- api 应该部署在专用域名下，如果 api 很简单，且不会扩展，可以放在主域名下
- 版本号要放在 URL 中
- 路径应该是一个资源，这来自于 restful 架构，不应该包含某个动作，动作应该交给 http 动词去做

## HTTP 动词

- GET
- POST
- PUT： 更新资源，客户端提供改变后的完整资源
- PATCH： 更新资源，客户端提供改变的属性
- DELETE
- HEAD（不常用）：获取资源元数据？
- OPTIONS（不常用）：获取信息，客户端可以改变资源多属性？？

## 过滤信息

    用于过滤返回结果，api应该提供用于过滤的参数，api路径和url的参数允许存在冗余，比如 GET/class/ID 等同于GET/class?id=ID

## 状态码

- 201 CREATED 用户新建或修改数据成功
- 202 Accepted 请求加入后台排队
- 204 用户删除数据成功
- 401 没有权限
- 403 得到授权，但访问是被禁止多
- 406 没有用户请求多格式
- 410 资源被永久删除，且不会再得到
- 422 创建对象时发生验证错误

## 错误处理

    不管返回正常结果还是出现错误，我们都应该统一返回的格式

```
    {
        error: 'Invalid API key'
    }
```

## 返回结果

- GET 返回一个数组或者一个对象
- POST 返回新生成的资源对象
- PUT 返回完整的资源对象
- PATCH 返回完整的资源对象
- DELETE 返回一个空对象

## 其他

- RESTful API 最好做到 Hypermedia
- API 的身份认证要通过 OAuth2 认证
- 返回格式应该使用 JSON，而不是 XML
